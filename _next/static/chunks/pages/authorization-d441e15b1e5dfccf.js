(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[733],{2911:function(t,e,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/authorization",function(){return r(3575)}])},5520:function(t,e,r){"use strict";r.d(e,{w:function(){return n.Z}});var n=r(1902);r(5017),n.Z.initializeApp({apiKey:"AIzaSyDBgOWcK3sW7JMluIqxHUn8-AxkS4Hq0VE",authDomain:"react-eurobet.firebaseapp.com",databaseURL:"https://react-eurobet-default-rtdb.europe-west1.firebasedatabase.app",projectId:"react-eurobet",storageBucket:"react-eurobet.appspot.com",messagingSenderId:"433338531669",appId:"1:433338531669:web:50d3ad5bd97217cbb579dc"})},3575:function(t,e,r){"use strict";r.r(e),r.d(e,{default:function(){return E}});var n=r(5893),s=r(7294),o=r(9008),a=r.n(o),i=r(5520),c=function(t){return i.w.database().ref("/authorization/").on("value",(function(e){return t(e.val())}))};function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function l(t,e){return!e||"object"!==f(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function p(t,e){return(p=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var f=function(t){return t&&"undefined"!==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};function d(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=u(t);if(e){var s=u(this).constructor;r=Reflect.construct(n,arguments,s)}else r=n.apply(this,arguments);return l(this,r)}}var h=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&p(t,e)}(r,t);var e=d(r);function r(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),(n=e.call(this,t)).state={isDisabled:!0,forceDisable:!1,resetDisable:!0,shouldCheckCode:!1,checkCodeDisable:!0,expectedCode:null,canChangePassword:!1},n.processForm=function(t){var e=n.emailRef.current,r=n.passwordRef.current;if(!e||!r)return!1;e.value.length>=3&&e.value.length<=70&&r.value.length>=3&&r.value.length<=70?n.setState({isDisabled:!t}):n.setState({isDisabled:t})},n.processReset=function(t){var e=n.emailRef.current,r=n.codeRef.current,s=n.newPasswordRef.current;e&&(e.value.length>=3&&e.value.length<=70?n.setState({isDisabled:!t}):n.setState({isDisabled:t})),n.state.shouldCheckCode&&r&&(6===r.value.length?(n.setState({shouldCheckCode:!t}),n.setState({resetDisable:t})):n.setState({shouldCheckCode:t})),n.state.canChangePassword&&s&&(s.value.length>=3&&s.value.length<=70?n.setState({isDisabled:!t}):n.setState({isDisabled:t}))},n.setExpectedCode=function(t){return n.setState({expectedCode:t})},n.clearPasswordInput=function(){return setTimeout((function(){return n.newPasswordRef.current.value=""}),0)},n.setChangePasswordStatus=function(t){n.setState({canChangePassword:t}),t&&(n.setState({resetDisable:!t}),n.clearPasswordInput())},n.setReset=function(t){return n.setState({resetDisable:t})},n.clearVerificationCode=function(){n.setState({resetDisable:!1}),n.setState({shouldCheckCode:!0}),n.codeRef.current.value=""},n.setDisableStatus=function(t,e){return n.setState({isDisabled:t}),n.setState({forceDisable:t}),e.data?n.setState({shouldCheckCode:!0}):n.setState({shouldCheckCode:!1})},n.emailRef=s.createRef(),n.passwordRef=s.createRef(),n.codeRef=s.createRef(),n.newPasswordRef=s.createRef(),n}return r.prototype.render=function(){var t,e=this;return(0,n.jsxs)(s.Fragment,{children:[(0,n.jsxs)("form",{className:"".concat(this.props.role,"__main_form authorization__main_form"),onChange:function(){return"login"===e.props.role||"registration"===e.props.role?e.processForm(!0):e.processReset(!0)},onSubmit:function(t){t.preventDefault(),e.setDisableStatus(!0,{}),"login"===e.props.role||"registration"===e.props.role?e.emailRef.current&&e.passwordRef.current&&e.props.callback(e.emailRef.current.value,e.passwordRef.current.value,e.props.setLoginStatus,e.setDisableStatus,e.props.setRegistrationStatus,e.props.setResetStatus,"",e.setExpectedCode,e.state.expectedCode,e.setChangePasswordStatus,e.clearVerificationCode,e.setReset,e.newPasswordRef.current):(e.emailRef.current&&e.codeRef.current&&e.props.callback(e.emailRef.current.value,e.codeRef.current.value,e.props.setLoginStatus,e.setDisableStatus,e.props.setRegistrationStatus,e.props.setResetStatus,e.props.data.text,e.setExpectedCode,e.state.expectedCode,e.setChangePasswordStatus,e.clearVerificationCode,e.setReset,""),e.emailRef.current&&e.newPasswordRef.current&&(e.setState({resetDisable:!0}),e.props.callback(e.emailRef.current.value,"",e.props.setLoginStatus,e.setDisableStatus,e.props.setRegistrationStatus,e.props.setResetStatus,e.props.data.text,e.setExpectedCode,e.state.expectedCode,e.setChangePasswordStatus,e.clearVerificationCode,e.setReset,e.newPasswordRef.current.value)))},children:["login"===this.props.role||"registration"===this.props.role?(0,n.jsxs)(s.Fragment,{children:[(0,n.jsx)("input",{type:"email",placeholder:this.props.data.inputs[0],ref:this.emailRef,className:"".concat(this.props.role,"__main_form_input authorization__main_form_input"),disabled:this.state.forceDisable}),(0,n.jsx)("input",{type:"password",placeholder:this.props.data.inputs[1],ref:this.passwordRef,className:"".concat(this.props.role,"__main_form_input authorization__main_form_input"),disabled:this.state.forceDisable})]}):(0,n.jsx)(s.Fragment,{children:this.state.shouldCheckCode?(0,n.jsxs)(s.Fragment,{children:[(0,n.jsx)("input",{type:"email",placeholder:this.props.data.inputs[0],ref:this.emailRef,className:"".concat(this.props.role,"__main_form_input authorization__main_form_input reset_input"),disabled:!0}),(0,n.jsx)("input",{type:"text",placeholder:this.props.data.inputs[1],ref:this.codeRef,className:"".concat(this.props.role,"__main_form_input authorization__main_form_input reset_input"),disabled:!1})]}):(0,n.jsxs)(s.Fragment,{children:[(0,n.jsx)("input",{type:"email",placeholder:this.props.data.inputs[0],ref:this.emailRef,className:"".concat(this.props.role,"__main_form_input authorization__main_form_input reset_input"),disabled:this.state.forceDisable}),this.state.canChangePassword?(0,n.jsx)("input",{type:"text",placeholder:this.props.data.inputs[2],ref:this.newPasswordRef,className:"".concat(this.props.role,"__main_form_input authorization__main_form_input reset_input"),disabled:this.state.resetDisable}):(0,n.jsx)("input",{type:"text",placeholder:this.props.data.inputs[1],ref:this.codeRef,className:"".concat(this.props.role,"__main_form_input authorization__main_form_input reset_input"),disabled:this.state.resetDisable})]})}),(0,n.jsx)("button",{type:"submit",disabled:this.state.shouldCheckCode?this.state.checkCodeDisable:this.state.isDisabled,className:"".concat(this.props.role,"__main_form_submit authorization__main_form_submit"),children:this.state.canChangePassword?(0,n.jsx)(s.Fragment,{children:this.props.data.button_extra_pass}):(0,n.jsx)(s.Fragment,{children:this.state.shouldCheckCode||6===(null===(t=this.codeRef.current)||void 0===t?void 0:t.value.length)&&!this.state.shouldCheckCode?this.props.data.button_extra:this.props.data.button})})]}),(0,n.jsx)("button",{className:"".concat(this.props.role,"__main_action authorization__main_action"),onClick:function(){return e.props.setRole(e.props.data.action_role)},disabled:this.state.forceDisable,children:this.props.data.action}),"login"===this.props.role||"registration"===this.props.role?(0,n.jsx)("button",{className:"".concat(this.props.role,"__main_reset authorization__main_reset"),onClick:function(){return e.props.setRole("reset")},disabled:this.state.forceDisable,children:this.props.data.reset}):(0,n.jsx)("button",{className:"".concat(this.props.role,"__main_action authorization__main_action"),onClick:function(){return e.props.setRole(e.props.data.action_role_extra)},disabled:this.state.forceDisable,children:this.props.data.action_extra})]})},r}(s.Component),_=r(9669),m=r.n(_);function b(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function g(t){return function(t){if(Array.isArray(t))return b(t)}(t)||function(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"===typeof t)return b(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return b(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var R=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return t.reset=function(t,e,r,n,s,o,a,c,u,l,p,f,d){if(null===u){for(var h=[],_=0;_<6;_++)h.push((y=0,S=9,Math.floor(Math.random()*(S-y))+y));var b=h.join(""),R=a.replace(/{email}/g,"".concat(t)).replace(/{code}/g,"".concat(b)),v={name:t,email:t,text:R,subject:t};i.w.database().ref("/authorization/").once("value",(function(e){return function(e,r,s,o){var a=e.filter((function(e){return"".concat(t)==="".concat(e.email)}));a.length>0&&m().post("/api/sendMail",v).then((function(t){alert(s),c("".concat(b)),n(!0,t),f(!0)})).catch((function(t){alert(r),n(!1,{}),console.log(t)})),0===a.length&&(alert("".concat(r," ").concat(o)),n(!1,{}))}(e.val().accounts,e.val().reset.fail,e.val().reset.success,e.val().reset.req_fail)}))}else{i.w.database().ref("/authorization/").once("value",(function(r){return 0===d.length?(r.val().accounts,n=r.val().reset.verification_fail,"".concat(e)==="".concat(u)&&l(!0),void("".concat(e)!=="".concat(u)&&(alert(n),p(),l(!1)))):function(e,r){var n={email:t,password:d},s=e.filter((function(t){return"".concat(n.email)!=="".concat(t.email)}));i.w.database().ref("/authorization/accounts/").set(g(s).concat([n])),alert(r),o(!0)}(r.val().accounts,r.val().reset.success_pass);var n}))}var y,S},t.login=function(t,e,r,n,s,o,a,c,u,l){var p={email:t,password:e};i.w.database().ref("/authorization/").once("value",(function(t){return function(t,e,s){var o=t.filter((function(t){return"".concat(p.email)==="".concat(t.email)&&"".concat(p.password)==="".concat(t.password)}));o.length>0&&(alert(s),n(!0,{}),r(!0,o[0])),0===o.length&&(alert(e),n(!1,{}),r(!1,null))}(t.val().accounts,t.val().login.fail,t.val().login.success)}))},t.registration=function(t,e,r,n,s,o,a,c,u,l){var p={email:t,password:e};i.w.database().ref("/authorization/").once("value",(function(t){return function(t,e,r){var o=t.filter((function(t){return"".concat(p.email)==="".concat(t.email)}));o.length>0&&(alert(e),n(!1,{}),s(!1)),0===o.length&&(i.w.database().ref("/authorization/accounts/").set(g(t).concat([p])),alert(r),n(!0,{}),s(!0))}(t.val().accounts,t.val().registration.fail,t.val().registration.success)}))},t}();function v(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function y(t){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function S(t,e){return!e||"object"!==x(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function w(t,e){return(w=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var x=function(t){return t&&"undefined"!==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};function j(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=y(t);if(e){var s=y(this).constructor;r=Reflect.construct(n,arguments,s)}else r=n.apply(this,arguments);return S(this,r)}}var C=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&w(t,e)}(r,t);var e=j(r);function r(){var t;return v(this,r),(t=e.apply(this,arguments)).state={model:{},role:t.props.role},t.setRole=function(e){return t.setState({role:e})},t}var o=r.prototype;return o.componentDidMount=function(){var t=this;c((function(e){return t.setState({model:e})}))},o.render=function(){var t=this.state.model;return(0,n.jsxs)(s.Fragment,{children:[0===Object.keys(t).length?null:(0,n.jsx)(a(),{children:"reset"===this.state.role?(0,n.jsx)("title",{children:t.reset.title}):(0,n.jsx)(s.Fragment,{children:"login"===this.state.role?(0,n.jsx)("title",{children:t.login.title}):(0,n.jsx)("title",{children:t.registration.title})})}),0===Object.keys(t).length?null:(0,n.jsx)("main",{className:"".concat(this.state.role," authorization"),children:(0,n.jsxs)("div",{className:"".concat(this.state.role,"__main authorization__main"),children:[(0,n.jsxs)("div",{className:"".concat(this.state.role,"__main_logo authorization__main_logo not-selectable"),children:[(0,n.jsx)("img",{src:"/".concat(t.logo),alt:this.state.role,className:"".concat(this.state.role,"__main_logo_img authorization__main_logo_img not-selectable")}),(0,n.jsx)("span",{className:"".concat(this.state.role,"__main_logo_span authorization__main_logo_span not-selectable"),children:t.slogan})]}),"reset"===this.state.role?(0,n.jsx)(h,{data:t.reset,setRole:this.setRole,role:"reset",callback:R.reset,didLogin:this.props.didLogin,setLoginStatus:this.props.setLoginStatus,didRegister:this.props.didRegister,setRegistrationStatus:this.props.setRegistrationStatus,didReset:this.props.didReset,setResetStatus:this.props.setResetStatus}):(0,n.jsx)(s.Fragment,{children:"login"===this.state.role?(0,n.jsx)(h,{data:t.login,setRole:this.setRole,role:"login",callback:R.login,didLogin:this.props.didLogin,setLoginStatus:this.props.setLoginStatus,didRegister:this.props.didRegister,setRegistrationStatus:this.props.setRegistrationStatus,didReset:this.props.didReset,setResetStatus:this.props.setResetStatus}):(0,n.jsx)(h,{data:t.registration,setRole:this.setRole,role:"registration",callback:R.registration,didLogin:this.props.didLogin,setLoginStatus:this.props.setLoginStatus,didRegister:this.props.didRegister,setRegistrationStatus:this.props.setRegistrationStatus,didReset:this.props.didReset,setResetStatus:this.props.setResetStatus})})]})})]})},r}(s.Component);function O(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function D(t){return(D=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function P(t,e){return!e||"object"!==z(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function k(t,e){return(k=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var z=function(t){return t&&"undefined"!==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};function N(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=D(t);if(e){var s=D(this).constructor;r=Reflect.construct(n,arguments,s)}else r=n.apply(this,arguments);return P(this,r)}}var E=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&k(t,e)}(r,t);var e=N(r);function r(){return O(this,r),e.apply(this,arguments)}return r.prototype.render=function(){return(0,n.jsx)(C,{role:"login",didLogin:this.props.didLogin,setLoginStatus:this.props.setLoginStatus,didRegister:this.props.didRegister,setRegistrationStatus:this.props.setRegistrationStatus,didReset:this.props.didReset,setResetStatus:this.props.setResetStatus})},r}(s.Component)}},function(t){t.O(0,[627,640,876,669,774,888,179],(function(){return e=2911,t(t.s=e);var e}));var e=t.O();_N_E=e}]);